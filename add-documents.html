<?php

require_once 'authentication.php';

?>
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document Tracking System</title>
    <link rel="stylesheet" href="./vendor/simple-line-icons/css/simple-line-icons.css">
    <link rel="stylesheet" href="./vendor/font-awesome/css/fontawesome-all.min.css">
    <link rel="stylesheet" href="./css/styles.css">
</head>
<body class="sidebar-fixed header-fixed" ng-app="document" ng-controller="documentCtrl">
<div class="page-wrapper">
    <nav class="navbar page-header">
        <a href="#" class="btn btn-link sidebar-mobile-toggle d-md-none mr-auto">
            <i class="fa fa-bars"></i>
        </a>

        <a class="navbar-brand" href="javascript:;">
            <img src="./imgs/dts.png" style ="width:180px;height:53px" alt="logo">
        </a>

        <a href="#" class="btn btn-link sidebar-toggle d-md-down-none">
            <i class="fa fa-bars"></i>
        </a>

        <ul class="navbar-nav ml-auto">
            <!-- <li class="nav-item d-md-down-none">
                <a href="#">
                    <i class="fa fa-bell"></i>
                    <span class="badge badge-pill badge-danger">5</span>
                </a>
            </li> -->
            <li class="nav-item dropdown" account-profile>
                <a class="nav-link dropdown-toggle" href="#" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <img src="{{profile.picture}}" class="avatar avatar-sm" alt="logo">
                    <span class="small ml-1 d-md-down-none">{{profile.user}}</span>
                </a>
                <div class="dropdown-menu dropdown-menu-right" drop-down></div>
            </li>
        </ul>
    </nav>

    <div class="main-container">
        <div class="sidebar">
            <nav class="sidebar-nav">
                <ul class="nav">
                    <li class="nav-title">Navigation</li>

                    <li class="nav-item">
                        <a href="index.html" class="nav-link">
                            <i class="icon icon-speedometer"></i> Dashboard
                        </a>
                    </li>
					                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle active">
                            <i class="icon icon-docs"></i> Documents <i class="fa fa-caret-left"></i>
                        </a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="add-documents.html" class="nav-link active">
                                    <i class="icon icon-plus"></i>Receive Document
                                </a>
                            </li><li class="nav-item">
                                <a href="add-documents.html" class="nav-link">
                                    <i class="icon icon-login"></i>Incoming Document
                                </a>
                            </li><li class="nav-item">
                                <a href="add-documents.html" class="nav-link">
                                    <i class="icon icon-book-open"></i>Review Document
                                </a>
                            </li><li class="nav-item">
                                <a href="add-documents.html" class="nav-link">
                                    <i class="icon icon-logout"></i>Outgoing Document
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="documents-list.html" class="nav-link">
                                    <i class="icon icon-doc"></i> List of Documents
                                </a>
                            </li>
							</li><li class="nav-item">
                                <a href="tracks.html" class="nav-link">
                                    <i class="icon icon-map"></i>Tracks
                                </a>
                            </li>
                        </ul>
                    </li>	
                    <li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-people"></i> Accounts <i class="fa fa-caret-left"></i>
                        </a>

                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="user-profile.html" class="nav-link">
                                    <i class="icon icon-user"></i> User Profile
                                </a>
                            </li>
                            <li class="nav-item">
                                <a href="users-list.html" class="nav-link">
                                    <i class="icon icon-people"></i> List
                                </a>
                            </li>
                        </ul>
                    </li>
					<li class="nav-item nav-dropdown">
                        <a href="#" class="nav-link nav-dropdown-toggle">
                            <i class="icon icon-support"></i> Maintenance <i class="fa fa-caret-left"></i>
                        </a>
                        <ul class="nav-dropdown-items">
                            <li class="nav-item">
                                <a href="office-maintenance.html" class="nav-link">
                                    <i class="icon icon-user"></i> Offices
                                </a>
                            </li>
							<li class="nav-item">
                                <a href="doctype-maintenance.html" class="nav-link">
                                    <i class="icon icon-docs"></i> Document Types
                                </a>
                            </li>
							<li class="nav-item">
                                <a href="transaction-maintenance.html" class="nav-link">
                                    <i class="icon icon-flag"></i> Transactions
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </nav>
        </div>
<div class="content">
            <div class="container-fluid">
				<button type="button" class="btn btn-primary" ng-click="app.add(this)" ng-show="controls.add" ng-disabled="!controls.btns.ok">
                    <i class="fas fa-file"></i> &nbsp; Add Document
                </button>
				<button type="button" class="btn btn-primary" ng-click="app.edit(this)" ng-show="controls.edit" ng-disabled="!controls.btns.ok">
                    <i class="fa fa-edit"></i> &nbsp; Edit
                </button>				
				<hr>
                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-header bg-light">
                                Documents
								<i class="fa fa-print float-right" style="cursor: pointer;" ng-click="app.print(this)"></i>
                            </div>

                            <div class="card-body">
							<form novalidate autocomplete=off name="formHolder.doc">
								<div class="row">
                                    <div class="col-md-4 offset-md-8">
										<canvas id="barcode" style="display: none;"></canvas>
                                        <div class="form-group">
                                            <label class="form-control-label">Barcode</label>											
                                            <input type="text" class="form-control" name="barcode" ng-model="doc.barcode" ng-disabled="true">
										</div>										
									</div>
								</div>
                                <div class="row">
                                    <div class="col-md-6">
										<div class="form-group">
                                            <label for="single-select">Originating Office</label>
                                            <select id="single-select" class="form-control" name="origin" ng-class="{'is-invalid': formHolder.doc.origin.$touched && formHolder.doc.origin.$invalid}" ng-model="doc.origin" ng-options="o.office for o in offices track by o.id" ng-disabled="controls.btns.ok" required></select>
											<div class="invalid-feedback">Office is required</div>											
                                        </div>
									</div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-control-label" >Document Type</label>
                                            <select id="single-select" class="form-control" name="doc_type" ng-class="{'is-invalid': formHolder.doc.doc_type.$touched && formHolder.doc.doc_type.$invalid}" ng-model="doc.doc_type" ng-options="d.document_type for d in document_types track by d.id" ng-disabled="controls.btns.ok" required></select>
											<div class="invalid-feedback">Document Type is required</div>
										</div>	
                                    </div>									
								</div>
								<div class="row" ng-show="doc.origin.office == 'Others'" >
                                    <div class="col-md-6">
										<div class="form-group">
                                            <label for="single-select">If Other Office</label>
                                            <input type="text" class="form-control" name="other_origin" ng-class="{'is-invalid': formHolder.doc.other_origin.$touched && formHolder.doc.other_origin.$invalid}" ng-model="doc.other_origin" ng-disabled="controls.btns.ok" ng-required="doc.origin.office == 'Others'">
											<div class="invalid-feedback">Office is required</div>											
                                        </div>
									</div>								
								</div>
                                <div class="row mt-4">
									<div class="col-md-3">
                                        <div class="form-group">
                                            <label class="form-control-label">Transaction</label>
                                            <select id="single-select" class="form-control" name="transaction" ng-class="{'is-invalid': formHolder.doc.transaction.$touched && formHolder.doc.transaction.$invalid}" ng-model="doc.transaction" ng-options="t.transaction for t in transactions track by t.id" ng-disabled="controls.btns.ok" required></select>
											<div class="invalid-feedback">Transaction is required</div>
										</div>
                                    </div>
									<div class="col-md-3">
                                        <div class="form-group">
                                            <label class="form-control-label">Communication</label>
                                            <select id="single-select" class="form-control" name="communication" ng-class="{'is-invalid': formHolder.doc.communication.$touched && formHolder.doc.communication.$invalid}" ng-model="doc.communication" ng-options="c.communication for c in communications track by c.id" ng-disabled="controls.btns.ok" required></select>
											<div class="invalid-feedback">Communication is Required</div>
										</div>	
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="form-control-label">Subject</label>
                                            <input type="text" class="form-control" name="doc_name" ng-class="{'is-invalid': formHolder.doc.doc_name.$touched && formHolder.doc.doc_name.$invalid}" ng-model="doc.doc_name" ng-disabled="controls.btns.ok" required>
											<div class="invalid-feedback">Document Name is Required</div>
										</div>	
                                    </div>
								</div>
								<div class="row mt-4">
                                    <div class="col-md-6 ">
                                        <div class="form-group">
                                            <label class="form-control-label">Remarks</label>
                                            <input type="text" class="form-control" name="remarks" ng-model="doc.remarks" ng-disabled="controls.btns.ok">
										</div>	
                                    </div>								
								</div>							
								<div class="row">
									<div class="col-md-12">
									<div class="card-header bg-light">File(s) <button class="btn btn-primary" ng-click="app.addFile(this)" ng-disabled="controls.btns.ok" ng-show="controls.ok">Add</button></div>
										<div class="input-group mb-3" style="display: none;">
										  <div class="input-group-prepend">
											<span class="input-group-text">Upload</span>
										  </div>
										  <div class="custom-file">
											<input type="file" class="custom-file-input" id="upload-files" add-files multiple>
											<label class="custom-file-label">Choose file</label>
										  </div>
										</div>									
                                    </div>
								</div>
								<div class="row">							
									<div class="col-md-4" ng-repeat="df in documentFiles">
									<hr>
										<object id="dfpdf{{$index}}" data="" height="425" ng-show="df.type == 'pdf'"></object>
										<img id="dfimg{{$index}}" src="" class="img-thumbnail" ng-show="df.type == 'jpeg' || df.type == 'png'">
									</div>
								</div>
								<hr>
								<div class="row">
									<div class="col-md-12">								
									<div class="card-header bg-light">Attachment(s) <button class="btn btn-primary" ng-click="app.addAttachment(this)" ng-disabled="controls.btns.ok" ng-show="controls.ok">Add</button></div>
										<div class="input-group mb-3" style="display: none;">
										  <div class="input-group-prepend">
											<span class="input-group-text">Upload</span>
										  </div>
										  <div class="custom-file">
											<input type="file" class="custom-file-input" id="upload-attachments" add-attachments multiple>
											<label class="custom-file-label">Choose file</label>
										  </div>
										</div>									
                                    </div>								
								</div>
								<hr>
								<div class="row">
									<div class="col-md-4" ng-repeat="af in attachmentFiles">
									<hr>
										<object id="afpdf{{$index}}" data="" height="425" ng-show="af.type == 'pdf'"></object>
										<img id="afimg{{$index}}" src="" class="img-thumbnail" ng-show="af.type == 'jpeg' || af.type == 'png'">
									</div>
								</div>
								<div class="row mt-4">
									<div class="col-md-12">
									<hr>
										<button class="btn btn-primary" ng-click="app.save(this)" ng-disabled="controls.btns.ok" ng-show="controls.ok">Save</button>
										<button class="btn btn-secondary" ng-disabled="controls.btns.cancel" ng-click="app.cancel(this)" ng-show="controls.cancel">Cancel</button>
									</div>
								</div>
							</form>
                            </div>
                        </div>
                    </div>
                </div>
			</div>
        </div>
    </div>
</div>
<script src="./vendor/jquery/jquery.min.js"></script>
<script src="./vendor/popper.js/popper.min.js"></script>
<script src="./vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="./vendor/chart.js/chart.min.js"></script>
<script src="./vendor/jsbarcode/JsBarcode.all.min.js"></script>
<script src="./vendor/jspdf/jspdf.min.js"></script>
<script src="./vendor/jspdf/jspdf.plugin.autotable.js"></script>
<script src="./js/carbon.js"></script>
<script src="./js/demo.js"></script>

<!-- dependencies -->
<script src="vendor/bootbox/bootbox.min.js"></script>
<script src="vendor/growl/jquery.bootstrap-growl.min.js"></script>
<script src="vendor/blockui/jquery.blockUI.js"></script>

<script src="angular/angular.min.js"></script>
<script src="angular/angular-route.min.js"></script>
<!-- modules -->
<script src="modules/bootstrap-modal.js"></script>
<script src="modules/account.js"></script>
<script src="modules/validate.js"></script>
<script src="modules/blockui.js"></script>
<script src="modules/growl.js"></script>
<script src="modules/jspdf.js"></script>
<script src="modules/upload-files.js"></script>
<script src="modules/add-documents.js"></script>
<!-- controller -->
<script src="controllers/add-documents.js"></script>
</body>
</html>
